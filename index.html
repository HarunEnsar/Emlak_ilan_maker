<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Emlak Ä°lanÄ± OluÅŸturucu</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: #f5f5f5;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: #e74c3c;
            color: white;
            padding: 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .form-section {
            padding: 30px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .type-selector {
            grid-column: 1 / -1;
            margin-bottom: 20px;
        }

        .type-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        .type-btn {
            padding: 15px 30px;
            border: 3px solid;
            border-radius: 5px;
            background: white;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .type-btn.satilik {
            border-color: #e74c3c;
            color: #e74c3c;
        }

        .type-btn.satilik.active {
            background: #e74c3c;
            color: white;
        }

        .type-btn.kiralik {
            border-color: #3498db;
            color: #3498db;
        }

        .type-btn.kiralik.active {
            background: #3498db;
            color: white;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            background: #e74c3c;
            color: white;
            padding: 10px 15px;
            font-weight: bold;
            font-size: 16px;
            border-radius: 5px 5px 0 0;
            margin-bottom: 0;
        }

        .form-group label.kiralik {
            background: #3498db;
        }

        .form-group input {
            padding: 15px;
            border: 3px solid #e74c3c;
            border-top: none;
            border-radius: 0 0 5px 5px;
            font-size: 16px;
            outline: none;
        }

        .form-group input.kiralik {
            border-color: #3498db;
        }

        .form-group input:focus {
            border-color: #c0392b;
        }

        .preview-section {
            margin-top: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .preview-card {
            background: white;
            border: 5px solid #e74c3c;
            padding: 30px;
            margin: 30px auto;
            max-width: 900px;
            aspect-ratio: 1754 / 1240;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            box-sizing: border-box;
        }

        .preview-card.kiralik {
            border-color: #3498db;
        }

        .preview-header {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
        }

        .title {
            color: #e74c3c;
            font-size: 3em;
            font-weight: bold;
            letter-spacing: 2px;
            text-align: center;
        }

        .title.kiralik {
            color: #3498db;
        }

        .property-details {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .detail-row {
            display: flex;
            border-radius: 5px;
            overflow: hidden;
            border: 3px solid #e74c3c;
            min-height: 70px;
        }

        .detail-row.kiralik {
            border-color: #3498db;
        }

        .detail-label {
            background: #e74c3c;
            color: white;
            padding: 15px 20px;
            font-weight: bold;
            font-size: 24px;
            min-width: 160px;
            width: 160px;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .detail-label.kiralik {
            background: #3498db;
        }

        .detail-value {
            background: white;
            padding: 15px 20px;
            font-size: 24px;
            font-weight: bold;
            color: #333;
            flex: 1;
            display: flex;
            align-items: center;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .buttons {
            text-align: center;
            margin-top: 30px;
        }

        .btn {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
            margin: 0 10px;
            transition: background 0.3s;
        }

        .btn:hover {
            background: #c0392b;
        }

        .btn-secondary {
            background: #95a5a6;
        }

        .btn-secondary:hover {
            background: #7f8c8d;
        }

        @media print {
            body { margin: 0; }
            .form-section, .buttons { display: none; }
            .preview-section { margin: 0; padding: 0; background: white; }
            .container { box-shadow: none; }
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            .container {
                border-radius: 5px;
            }

            .header h1 {
                font-size: 1.8em;
                margin-bottom: 5px;
            }

            .header p {
                font-size: 12px;
            }

            .form-section {
                padding: 15px;
            }

            .form-grid {
                grid-template-columns: 1fr;
                gap: 10px;
                margin-bottom: 15px;
            }

            .form-group label {
                font-size: 14px;
                padding: 8px 10px;
            }

            .form-group input {
                padding: 12px;
                font-size: 14px;
            }

            /* YazÄ± Boyutu AyarÄ± - Mobile */
            .form-group[style*="grid-column"] {
                margin-top: 15px !important;
            }

            .form-group[style*="grid-column"] div {
                flex-direction: column;
                gap: 10px !important;
            }

            .form-group[style*="grid-column"] span {
                width: 100% !important;
                min-width: auto !important;
                text-align: center !important;
            }

            .form-group[style*="grid-column"] input[type="range"] {
                width: 100% !important;
            }

            .type-buttons {
                flex-direction: column;
                align-items: stretch;
                gap: 8px;
            }

            .type-btn {
                width: 100%;
                padding: 12px 20px;
                margin: 0;
                font-size: 16px;
            }

            .preview-card {
                margin: 15px auto;
                padding: 20px;
                border: 4px solid;
                border-radius: 8px;
                max-width: 95%;
                aspect-ratio: 1754 / 1240;
            }

            .preview-header {
                margin-bottom: 15px;
            }

            .title {
                font-size: 2em;
                letter-spacing: 1px;
                font-weight: bold;
            }

            .property-details {
                gap: 10px;
            }

            .detail-row {
                flex-wrap: wrap;
                min-height: 60px;
                border: 3px solid;
                border-radius: 5px;
                overflow: hidden;
            }

            .detail-label {
                background: #e74c3c;
                color: white;
                font-size: 16px;
                padding: 12px 15px;
                font-weight: bold;
                width: 120px;
                min-width: 120px;
                flex-shrink: 0;
                display: flex;
                align-items: center;
                justify-content: center;
                margin-bottom: 0;
                border-radius: 0;
            }

            .detail-label.kiralik {
                background: #3498db;
            }

            .detail-value {
                background: white;
                color: #333;
                font-size: 16px;
                padding: 12px 15px;
                flex: 1;
                display: flex;
                align-items: center;
                border-radius: 0;
            }

            .buttons {
                display: flex;
                flex-direction: column;
                gap: 10px;
                margin-top: 20px;
            }

            .btn {
                padding: 14px 15px;
                font-size: 15px;
                margin: 0;
                width: 100%;
                border-radius: 5px;
                cursor: pointer;
                transition: background 0.3s;
            }

            .detail-row {
                flex-wrap: wrap;
                min-height: 60px;
                border: 3px solid;
                border-radius: 5px;
                overflow: hidden;
            }

            .preview-section {
                padding: 10px;
                margin-top: 15px;
            }

            .preview-section h3 {
                font-size: 16px;
                margin-bottom: 15px;
            }

            #preview-firma {
                font-size: 24px !important;
                margin-bottom: 15px;
            }

            /* Modal Mobile */
            .modal-content {
                width: 95%;
                padding: 20px;
                max-height: 90vh;
            }

            .modal-header h2 {
                font-size: 20px;
            }

            .instruction-step {
                margin-bottom: 15px;
                padding: 12px;
            }

            .instruction-step h3 {
                font-size: 16px;
            }

            .instruction-step p {
                font-size: 14px;
                line-height: 1.6;
            }

            .help-button {
                width: 50px;
                height: 50px;
                bottom: 20px;
                right: 20px;
                font-size: 24px;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 5px;
            }

            .header h1 {
                font-size: 1.4em;
            }

            .type-btn {
                font-size: 14px;
                padding: 10px;
            }

            .preview-card {
                margin: 15px auto;
                padding: 18px;
                max-width: 98%;
                aspect-ratio: 1754 / 1240;
            }

            .detail-label {
                font-size: 15px;
                width: 110px;
                min-width: 110px;
            }

            .detail-value {
                font-size: 15px;
            }

            .btn {
                font-size: 14px;
                padding: 12px;
            }

            .modal-content {
                width: 98%;
                padding: 15px;
            }

            .help-button {
                width: 45px;
                height: 45px;
                font-size: 20px;
            }
        }

        /* Modal/Pop-up Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 9999;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
        }

        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background-color: white;
            padding: 30px;
            border-radius: 15px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            padding-top: 0;
            border-bottom: 3px solid #e74c3c;
            position: sticky;
            top: 0;
            background: white;
            z-index: 10000;
        }

        .modal-header h2 {
            color: #e74c3c;
            font-size: 28px;
            margin: 0;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 48px;
            cursor: pointer;
            color: #e74c3c;
            font-weight: bold;
            padding: 0;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s;
        }

        .modal-close:hover {
            background: #e74c3c;
            color: white;
            transform: scale(1.15);
        }

        .modal-body {
            color: #333;
            line-height: 1.8;
        }

        .instruction-step {
            margin-bottom: 25px;
            padding: 15px;
            background: #f8f9fa;
            border-left: 4px solid #e74c3c;
            border-radius: 5px;
        }

        .instruction-step h3 {
            color: #e74c3c;
            margin: 0 0 10px 0;
            font-size: 18px;
        }

        .instruction-step p {
            margin: 0;
            font-size: 16px;
        }

        .help-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: #e74c3c;
            color: white;
            border: none;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            font-size: 28px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .help-button:hover {
            background: #c0392b;
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }
    </style>
</head>
<body>
    <!-- YardÄ±m Modal -->
    <div id="helpModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ“– NasÄ±l KullanÄ±rÄ±lÄ±r?</h2>
                <button class="modal-close" onclick="closeHelp()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="instruction-step">
                    <h3>1ï¸âƒ£ SatÄ±ÅŸ/KiralÄ±k SeÃ§in</h3>
                    <p>SayfanÄ±n baÅŸÄ±nda <strong>SATILIK</strong> ya da <strong>KÄ°RALIK</strong> butonuna tÄ±klayÄ±n. Renk deÄŸiÅŸtiÄŸinde seÃ§im yapÄ±lmÄ±ÅŸ demektir.</p>
                </div>

                <div class="instruction-step">
                    <h3>2ï¸âƒ£ Firma AdÄ± Girin (Ä°steÄŸe BaÄŸlÄ±)</h3>
                    <p>EmlakÃ§Ä± firmanÄ±zÄ±n adÄ±nÄ± yazÄ±n. VarsayÄ±lan olarak <strong>"ENSARÄ°OÄLU GAYRÄ°MENKUL"</strong> yazÄ±lÄ±dÄ±r. DeÄŸiÅŸtirmek istemezseniz olduÄŸu gibi bÄ±rakabilirsiniz.</p>
                </div>

                <div class="instruction-step">
                    <h3>3ï¸âƒ£ Emlak Bilgilerini Doldurun</h3>
                    <p>AÅŸaÄŸÄ±daki alanlarÄ± doldurun:</p>
                    <p><strong>â€¢ CÄ°NS:</strong> "3+1 DAÄ°RE (115 MÂ²)" gibi yazÄ±n<br>
                    <strong>â€¢ KONUM:</strong> BulunduÄŸu mahalle/bÃ¶lge yazÄ±n<br>
                    <strong>â€¢ Ã–ZELLÄ°K:</strong> "ESKÄ° YAPI, 2. KAT" gibi Ã¶zellikler yazÄ±n<br>
                    <strong>â€¢ FÄ°YAT:</strong> "2 MÄ°LYON 400 BÄ°N TL" ÅŸeklinde yazÄ±n</p>
                </div>

                <div class="instruction-step">
                    <h3>4ï¸âƒ£ YazÄ± Boyutunu AyarlayÄ±n</h3>
                    <p><strong>YAZI BOYUTU AYARI</strong> baÅŸlÄ±ÄŸÄ±nÄ±n altÄ±ndaki kaydÄ±rÄ±cÄ±yÄ± saÄŸa-sola kaydÄ±rarak metinlerin bÃ¼yÃ¼klÃ¼ÄŸÃ¼nÃ¼ kontrol edin. <strong>SaÄŸ tarafta mevcut boyut gÃ¶sterilir.</strong></p>
                </div>

                <div class="instruction-step">
                    <h3>5ï¸âƒ£ Ã–nizlemede Kontrol Edin</h3>
                    <p>SayfayÄ± aÅŸaÄŸÄ± kaydÄ±rarak <strong>"Ã–nizleme (GerÃ§ek Ã‡Ä±ktÄ±)"</strong> bÃ¶lÃ¼mÃ¼nde ilanÄ±nÄ±zÄ±n nasÄ±l gÃ¶rÃ¼neceÄŸini gÃ¶rebilirsiniz. <strong>Tam olarak bu ÅŸekilde Ã§Ä±kacaktÄ±r.</strong></p>
                </div>

                <div class="instruction-step">
                    <h3>6ï¸âƒ£ Resim Ä°ndir</h3>
                    <p><strong>KÄ±rmÄ±zÄ± "Resim Ä°ndir"</strong> butonuna tÄ±klayÄ±n. A4 boyutunda, Ã§Ä±ktÄ± almaya hazÄ±r bir PNG resmi bilgisayarÄ±nÄ±za indirilecektir.</p>
                </div>

                <div class="instruction-step">
                    <h3>7ï¸âƒ£ PDF Ä°ndir</h3>
                    <p><strong>YeÅŸil "PDF Ä°ndir"</strong> butonuna tÄ±klayÄ±n. Ä°lanÄ±nÄ±z PDF formatÄ±nda indirilecektir. YazÄ±cÄ±dan A4 kaÄŸÄ±da yazdÄ±rabilirsiniz.</p>
                </div>

                <div class="instruction-step">
                    <h3>ğŸ’¡ Ä°puÃ§larÄ±</h3>
                    <p>â€¢ YazÄ± boyutunu kÃ¼Ã§Ã¼k tutarsanÄ±z daha fazla bilgi sÄ±ÄŸabilir<br>
                    â€¢ Dosya adÄ± otomatik olarak <strong>"cins_konum"</strong> formatÄ±nda oluÅŸturulur<br>
                    â€¢ Temizle butonuyla tÃ¼m alanlarÄ± sÄ±fÄ±rlayabilirsiniz<br>
                    â€¢ YazÄ±lar otomatik olarak BÃœYÃœK HARF'e Ã§evrilir</p>
                </div>
            </div>
        </div>
    </div>

    <!-- YardÄ±m Butonu -->
    <button class="help-button" onclick="openHelp()" title="NasÄ±l KullanÄ±rÄ±lÄ±r?">?</button>

    <div class="container">
        <div class="header">
            <h1>Emlak Ä°lanÄ± OluÅŸturucu</h1>
            <p>Bilgileri doldurun ve resim olarak indirin</p>
        </div>

        <div class="form-section">
            <div class="type-selector">
                <div class="type-buttons">
                    <button class="type-btn satilik active" onclick="setType('satilik')">SATILIK</button>
                    <button class="type-btn kiralik" onclick="setType('kiralik')">KÄ°RALIK</button>
                </div>
            </div>
            
            <div class="form-grid">
                <div class="form-group">
                    <label for="firma" id="label-firma">FÄ°RMA ADI</label>
                    <input type="text" id="firma" placeholder="Ã–rn: ENSARÄ°OÄLU GAYRÄ°MENKUL" value="ENSARÄ°OÄLU GAYRÄ°MENKUL">
                </div>
                <div class="form-group">
                    <label for="cins" id="label-cins">CÄ°NS</label>
                    <input type="text" id="cins" placeholder="Ã–rn: 3+1 DAÄ°RE (115 MÂ²)">
                </div>
                <div class="form-group">
                    <label for="konum" id="label-konum">KONUM</label>
                    <input type="text" id="konum" placeholder="Ã–rn: MEHMET AKÄ°F MAH.">
                </div>
                <div class="form-group">
                    <label for="ozellik" id="label-ozellik">Ã–ZELLÄ°K</label>
                    <input type="text" id="ozellik" placeholder="Ã–rn: ESKÄ° YAPI, 2. KAT, 60 MÂ² ARSA PAYI">
                </div>
                <div class="form-group">
                    <label for="fiyat" id="label-fiyat">FÄ°YAT</label>
                    <input type="text" id="fiyat" placeholder="Ã–rn: 2 MÄ°LYON 400 BÄ°N TL">
                </div>
            </div>

            <div class="form-group" style="grid-column: 1 / -1; margin-top: 20px;">
                <label style="background: #2c3e50;">YAZI BOYUTU AYARI</label>
                <div style="display: flex; gap: 20px; align-items: center; padding: 15px; border: 3px solid #2c3e50; border-top: none; border-radius: 0 0 5px 5px; background: white;">
                    <span style="font-weight: bold; min-width: 100px;">KÃ¼Ã§Ã¼k</span>
                    <input type="range" id="fontSize" min="18" max="36" value="34" step="2" style="flex: 1;" oninput="updateFontSize(this.value)">
                    <span style="font-weight: bold; min-width: 100px; text-align: right;">BÃ¼yÃ¼k</span>
                    <span id="fontSizeValue" style="font-weight: bold; min-width: 60px; text-align: center; background: #2c3e50; color: white; padding: 5px 10px; border-radius: 5px;">34px</span>
                </div>
            </div>

            <div class="buttons">
                <button class="btn" onclick="updatePreview()">Ã–nizlemeyi GÃ¼ncelle</button>
                <button class="btn btn-secondary" onclick="clearForm()">Temizle</button>
                <button class="btn" onclick="downloadAsImage()">Resim Ä°ndir</button>
                <button class="btn" style="background: #27ae60;" onclick="downloadAsPDF()">PDF Ä°ndir</button>
            </div>
        </div>

        <div class="preview-section">
            <h3 style="text-align: center; margin-bottom: 20px; color: #e74c3c;" id="preview-title">Ã–nizleme (GerÃ§ek Ã‡Ä±ktÄ±)</h3>
            
            <!-- Firma adÄ± Ã¶nizleme iÃ§in -->
            <div style="text-align: center; margin-bottom: 20px;">
                <div id="preview-firma" style="font-size: 48px; font-weight: bold; color: #e74c3c; font-family: Arial, sans-serif;">ENSARÄ°OÄLU GAYRÄ°MENKUL</div>
            </div>
            
            <div class="preview-card" id="preview-card">
                <div class="preview-header">
                    <div class="title" id="title-text">SATILIK</div>
                </div>
                <div class="property-details">
                    <div class="detail-row" id="detail-row-1">
                        <div class="detail-label" id="detail-label-1">CÄ°NS</div>
                        <div class="detail-value" id="preview-cins">3+1 DAÄ°RE (115 MÂ²)</div>
                    </div>
                    
                    <div class="detail-row" id="detail-row-2">
                        <div class="detail-label" id="detail-label-2">KONUM</div>
                        <div class="detail-value" id="preview-konum">MEHMET AKÄ°F MAH.</div>
                    </div>
                    
                    <div class="detail-row" id="detail-row-3">
                        <div class="detail-label" id="detail-label-3">Ã–ZELLÄ°K</div>
                        <div class="detail-value" id="preview-ozellik">ESKÄ° YAPI, 2. KAT, 60 MÂ² ARSA PAYI</div>
                    </div>
                    
                    <div class="detail-row" id="detail-row-4">
                        <div class="detail-label" id="detail-label-4">FÄ°YAT</div>
                        <div class="detail-value" id="preview-fiyat">2 MÄ°LYON 400 BÄ°N TL</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentType = 'satilik';
        let currentFontSize = 34;

        function openHelp() {
            document.getElementById('helpModal').classList.add('show');
        }

        function closeHelp() {
            document.getElementById('helpModal').classList.remove('show');
        }

        // Modal'Ä±n dÄ±ÅŸÄ±na tÄ±klanÄ±rsa kapat
        window.onclick = function(event) {
            const modal = document.getElementById('helpModal');
            if (event.target === modal) {
                closeHelp();
            }
        }

        // ESC tuÅŸuna basÄ±nca kapat
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeHelp();
            }
        });

        function updateFontSize(size) {
            currentFontSize = parseInt(size);
            document.getElementById('fontSizeValue').textContent = size + 'px';
            
            // Ã–nizlemedeki yazÄ± boyutlarÄ±nÄ± gÃ¼ncelle
            const detailLabels = document.querySelectorAll('#preview-card .detail-label');
            const detailValues = document.querySelectorAll('#preview-card .detail-value');
            
            detailLabels.forEach(label => {
                label.style.fontSize = size + 'px';
            });
            
            detailValues.forEach(value => {
                value.style.fontSize = size + 'px';
            });
        }

        function setType(type) {
            currentType = type;
            
            // Update buttons
            document.querySelectorAll('.type-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`.type-btn.${type}`).classList.add('active');
            
            // Update form colors
            const labels = document.querySelectorAll('.form-group label');
            const inputs = document.querySelectorAll('.form-group input');
            
            labels.forEach(label => {
                label.classList.remove('kiralik');
                if (type === 'kiralik') label.classList.add('kiralik');
            });
            
            inputs.forEach(input => {
                input.classList.remove('kiralik');
                if (type === 'kiralik') input.classList.add('kiralik');
            });
            
            // Update preview
            const previewCard = document.getElementById('preview-card');
            const titleText = document.getElementById('title-text');
            const previewTitle = document.getElementById('preview-title');
            const previewFirma = document.getElementById('preview-firma');
            const detailLabels = document.querySelectorAll('.detail-label');
            const detailValues = document.querySelectorAll('.detail-value');
            const detailRows = document.querySelectorAll('.detail-row');
            
            if (type === 'kiralik') {
                previewCard.classList.add('kiralik');
                titleText.classList.add('kiralik');
                titleText.textContent = 'KÄ°RALIK';
                previewTitle.style.color = '#3498db';
                previewFirma.style.color = '#3498db';
                detailLabels.forEach(label => label.classList.add('kiralik'));
                detailValues.forEach(value => value.classList.add('kiralik'));
                detailRows.forEach(row => row.classList.add('kiralik'));
            } else {
                previewCard.classList.remove('kiralik');
                titleText.classList.remove('kiralik');
                titleText.textContent = 'SATILIK';
                previewTitle.style.color = '#e74c3c';
                previewFirma.style.color = '#e74c3c';
                detailLabels.forEach(label => label.classList.remove('kiralik'));
                detailValues.forEach(value => value.classList.remove('kiralik'));
                detailRows.forEach(row => row.classList.remove('kiralik'));
            }
        }

        function updatePreview() {
            const firma = document.getElementById('firma').value || 'ENSARÄ°OÄLU GAYRÄ°MENKUL';
            const cins = document.getElementById('cins').value || '3+1 DAÄ°RE (115 MÂ²)';
            const konum = document.getElementById('konum').value || 'MEHMET AKÄ°F MAH.';
            const ozellik = document.getElementById('ozellik').value || 'ESKÄ° YAPI, 2. KAT, 60 MÂ² ARSA PAYI';
            const fiyat = document.getElementById('fiyat').value || '2 MÄ°LYON 400 BÄ°N TL';

            document.getElementById('preview-firma').textContent = firma.toUpperCase();
            document.getElementById('preview-cins').textContent = cins.toUpperCase();
            document.getElementById('preview-konum').textContent = konum.toUpperCase();
            document.getElementById('preview-ozellik').textContent = ozellik.toUpperCase();
            document.getElementById('preview-fiyat').textContent = fiyat.toUpperCase();
            
            // Font boyutunu uygula
            updateFontSize(currentFontSize);
        }

        function clearForm() {
            document.getElementById('firma').value = 'ENSARÄ°OÄLU GAYRÄ°MENKUL';
            document.getElementById('cins').value = '';
            document.getElementById('konum').value = '';
            document.getElementById('ozellik').value = '';
            document.getElementById('fiyat').value = '';
            updatePreview();
        }

        function downloadAsImage() {
            updatePreview();
            
            const previewCard = document.getElementById('preview-card');
            const firma = document.getElementById('firma').value || 'ENSARÄ°OÄLU GAYRÄ°MENKUL';
            
            // Ã–nce preview card'Ä± sabit boyutta klonla
            const clonedCard = previewCard.cloneNode(true);
            clonedCard.style.position = 'absolute';
            clonedCard.style.left = '-9999px';
            clonedCard.style.top = '0';
            clonedCard.style.width = '800px';
            clonedCard.style.maxWidth = '800px';
            clonedCard.style.padding = '30px';
            clonedCard.style.fontSize = '22px';
            clonedCard.style.border = currentType === 'kiralik' ? '6px solid #3498db' : '6px solid #e74c3c';
            clonedCard.style.borderRadius = '15px';
            clonedCard.style.background = 'white';
            clonedCard.style.boxSizing = 'border-box';
            
            // Klonu DOM'a ekle
            document.body.appendChild(clonedCard);
            
            // Klonun boyutlarÄ±nÄ± ayarla
            const titleElement = clonedCard.querySelector('.title');
            if (titleElement) {
                titleElement.style.fontSize = '3.2em';
                titleElement.style.letterSpacing = '3px';
            }
            
            const detailLabels = clonedCard.querySelectorAll('.detail-label');
            const detailValues = clonedCard.querySelectorAll('.detail-value');
            
            detailLabels.forEach(label => {
                label.style.fontSize = currentFontSize + 'px';
                label.style.padding = '20px 30px';
                label.style.minWidth = '160px';
                label.style.fontWeight = 'bold';
            });
            
            detailValues.forEach(value => {
                value.style.fontSize = currentFontSize + 'px';
                value.style.padding = '20px 30px';
                value.style.fontWeight = 'bold';
            });
            
            // Gap'i artÄ±r
            const propertyDetails = clonedCard.querySelector('.property-details');
            if (propertyDetails) {
                propertyDetails.style.gap = '12px';
            }
            
            // Klon tamamen render edilmesi iÃ§in kÄ±sa bir gecikme
            setTimeout(() => {
                // HTML2Canvas ile klonu yakala
                html2canvas(clonedCard, {
                    backgroundColor: '#ffffff',
                    scale: 2,
                    useCORS: true,
                    allowTaint: true,
                    width: clonedCard.offsetWidth,
                    height: clonedCard.offsetHeight,
                    scrollX: 0,
                    scrollY: 0,
                    logging: false
                }).then(function(canvas) {
                    document.body.removeChild(clonedCard);
                    
                    // A4 landscape canvas oluÅŸtur
                    const landscapeCanvas = document.createElement('canvas');
                    const ctx = landscapeCanvas.getContext('2d');
                    
                    // A4 landscape boyutlarÄ±
                    const A4_WIDTH = 1754;
                    const A4_HEIGHT = 1240;
                    
                    landscapeCanvas.width = A4_WIDTH;
                    landscapeCanvas.height = A4_HEIGHT;
                    
                    // Beyaz arka plan
                    ctx.fillStyle = '#ffffff';
                    ctx.fillRect(0, 0, A4_WIDTH, A4_HEIGHT);
                    
                    // Firma adÄ± ekle (Ã¼st kÄ±sÄ±mda)
                    ctx.font = 'bold 80px Arial, sans-serif';
                    ctx.fillStyle = currentType === 'kiralik' ? '#3498db' : '#e74c3c';
                    ctx.textAlign = 'center';
                    ctx.textBaseline = 'top';
                    ctx.fillText(firma.toUpperCase(), A4_WIDTH / 2, 40);
                    
                    // Ä°Ã§eriÄŸi A4'e sÄ±ÄŸdÄ±r
                    const topMargin = 140;
                    const margin = 60;
                    const maxWidth = A4_WIDTH - (margin * 2);
                    const maxHeight = A4_HEIGHT - topMargin - margin;
                    
                    // Scale hesapla
                    const scaleX = maxWidth / canvas.width;
                    const scaleY = maxHeight / canvas.height;
                    const scale = Math.min(scaleX, scaleY);
                    
                    const scaledWidth = canvas.width * scale;
                    const scaledHeight = canvas.height * scale;
                    
                    // Merkeze yerleÅŸtir
                    const x = (A4_WIDTH - scaledWidth) / 2;
                    const y = topMargin + (maxHeight - scaledHeight) / 2;
                    
                    // Ä°Ã§eriÄŸi Ã§iz
                    ctx.drawImage(canvas, x, y, scaledWidth, scaledHeight);
                    
                    // Ä°ndir
                    const link = document.createElement('a');
                    const cinsValue = document.getElementById('cins').value.trim();
                    const konumValue = document.getElementById('konum').value.trim();
                    const cinsClean = cinsValue ? cinsValue.toLowerCase().replace(/[\/\\:*?"<>|]/g, '').replace(/\s+/g, '_') : 'ilan';
                    const konumClean = konumValue ? konumValue.toLowerCase().replace(/[\/\\:*?"<>|]/g, '').replace(/\s+/g, '_') : 'konum';
                    const fileName = cinsClean + '_' + konumClean + '.png';
                    
                    link.download = fileName;
                    link.href = landscapeCanvas.toDataURL('image/png', 0.95);
                    
                    // Link'i DOM'a ekle, tÄ±kla ve kaldÄ±r
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                    
                }).catch(function(error) {
                    // Hata durumunda klonu temizle
                    if (document.body.contains(clonedCard)) {
                        document.body.removeChild(clonedCard);
                    }
                    console.error('Resim indirme hatasÄ±:', error);
                    alert('Resim indirme sÄ±rasÄ±nda bir hata oluÅŸtu. LÃ¼tfen tekrar deneyin.');
                });
            }, 100);
        }

        function downloadAsPDF() {
            updatePreview();
            
            const previewCard = document.getElementById('preview-card');
            const firma = document.getElementById('firma').value || 'ENSARÄ°OÄLU GAYRÄ°MENKUL';
            const cinsValue = document.getElementById('cins').value.trim();
            const konumValue = document.getElementById('konum').value.trim();
            const cinsClean = cinsValue ? cinsValue.toLowerCase().replace(/[\/\\:*?"<>|]/g, '').replace(/\s+/g, '_') : 'ilan';
            const konumClean = konumValue ? konumValue.toLowerCase().replace(/[\/\\:*?"<>|]/g, '').replace(/\s+/g, '_') : 'konum';
            
            // Klonlama
            const clonedCard = previewCard.cloneNode(true);
            clonedCard.style.position = 'absolute';
            clonedCard.style.left = '-9999px';
            clonedCard.style.top = '0';
            clonedCard.style.width = '800px';
            clonedCard.style.maxWidth = '800px';
            clonedCard.style.padding = '30px';
            clonedCard.style.fontSize = '22px';
            clonedCard.style.border = currentType === 'kiralik' ? '6px solid #3498db' : '6px solid #e74c3c';
            clonedCard.style.borderRadius = '15px';
            clonedCard.style.background = 'white';
            clonedCard.style.boxSizing = 'border-box';
            
            document.body.appendChild(clonedCard);
            
            const titleElement = clonedCard.querySelector('.title');
            if (titleElement) {
                titleElement.style.fontSize = '3.2em';
                titleElement.style.letterSpacing = '3px';
            }
            
            const detailLabels = clonedCard.querySelectorAll('.detail-label');
            const detailValues = clonedCard.querySelectorAll('.detail-value');
            
            detailLabels.forEach(label => {
                label.style.fontSize = currentFontSize + 'px';
                label.style.padding = '20px 30px';
                label.style.minWidth = '160px';
                label.style.fontWeight = 'bold';
            });
            
            detailValues.forEach(value => {
                value.style.fontSize = currentFontSize + 'px';
                value.style.padding = '20px 30px';
                value.style.fontWeight = 'bold';
            });
            
            // Gap'i artÄ±r
            const propertyDetails = clonedCard.querySelector('.property-details');
            if (propertyDetails) {
                propertyDetails.style.gap = '12px';
            }
            
            setTimeout(() => {
                html2canvas(clonedCard, {
                    backgroundColor: '#ffffff',
                    scale: 2,
                    useCORS: true,
                    allowTaint: true,
                    width: clonedCard.offsetWidth,
                    height: clonedCard.offsetHeight,
                    scrollX: 0,
                    scrollY: 0,
                    logging: false
                }).then(function(canvas) {
                    document.body.removeChild(clonedCard);
                    
                    // A4 landscape canvas oluÅŸtur (firma adÄ± ile birlikte)
                    const finalCanvas = document.createElement('canvas');
                    const finalCtx = finalCanvas.getContext('2d');
                    
                    // A4 landscape boyutlarÄ±
                    const A4_WIDTH = 1754;
                    const A4_HEIGHT = 1240;
                    
                    finalCanvas.width = A4_WIDTH;
                    finalCanvas.height = A4_HEIGHT;
                    
                    // Beyaz arka plan
                    finalCtx.fillStyle = '#ffffff';
                    finalCtx.fillRect(0, 0, A4_WIDTH, A4_HEIGHT);
                    
                    // Firma adÄ±nÄ± ekle
                    finalCtx.font = 'bold 80px Arial, sans-serif';
                    finalCtx.fillStyle = currentType === 'kiralik' ? '#3498db' : '#e74c3c';
                    finalCtx.textAlign = 'center';
                    finalCtx.textBaseline = 'top';
                    finalCtx.fillText(firma.toUpperCase(), A4_WIDTH / 2, 40);
                    
                    // Ä°lan resmini ekle
                    const topMargin = 140;
                    const margin = 60;
                    const maxWidth = A4_WIDTH - (margin * 2);
                    const maxHeight = A4_HEIGHT - topMargin - margin;
                    
                    const scaleX = maxWidth / canvas.width;
                    const scaleY = maxHeight / canvas.height;
                    const scale = Math.min(scaleX, scaleY);
                    
                    const scaledWidth = canvas.width * scale;
                    const scaledHeight = canvas.height * scale;
                    
                    const x = (A4_WIDTH - scaledWidth) / 2;
                    const y = topMargin + (maxHeight - scaledHeight) / 2;
                    
                    finalCtx.drawImage(canvas, x, y, scaledWidth, scaledHeight);
                    
                    // Resmi PNG'e Ã§evir
                    const imgData = finalCanvas.toDataURL('image/png', 1.0);
                    
                    // jsPDF ile direkt PDF'e dÃ¶nÃ¼ÅŸtÃ¼r
                    const { jsPDF } = window.jspdf;
                    const pdf = new jsPDF({
                        orientation: 'landscape',
                        unit: 'mm',
                        format: 'a4'
                    });
                    
                    const pageWidth = pdf.internal.pageSize.getWidth();
                    const pageHeight = pdf.internal.pageSize.getHeight();
                    
                    // Resmi PDF'e ekle (tam sayfa kaplasÄ±n)
                    pdf.addImage(imgData, 'PNG', 0, 0, pageWidth, pageHeight);
                    
                    // PDF'i indir
                    const fileName = cinsClean + '_' + konumClean + '.pdf';
                    pdf.save(fileName);
                    
                }).catch(function(error) {
                    if (document.body.contains(clonedCard)) {
                        document.body.removeChild(clonedCard);
                    }
                    console.error('Hata:', error);
                    alert('PDF oluÅŸturma hatasÄ±: ' + error.message);
                });
            }, 100);
        }        // Auto-update preview when typing
        document.addEventListener('DOMContentLoaded', function() {
            const inputs = ['firma', 'cins', 'konum', 'ozellik', 'fiyat'];
            inputs.forEach(id => {
                document.getElementById(id).addEventListener('input', updatePreview);
            });
            
            // Ä°lk yÃ¼kleme iÃ§in font boyutunu uygula
            updateFontSize(currentFontSize);
            
            // Sayfa yÃ¼klendiÄŸinde yardÄ±m modal'Ä±nÄ± aÃ§
            openHelp();
        });
    </script>
</body>
</html>
